<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Business Dashboard - CyberCheck</title>
  <link rel="stylesheet" href="css/dashboard.css">
  <link rel="stylesheet" href="css/analytics-seo-social.css">
</head>
<body>
  <div class="layout">

    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h2 id="sidebar-biz-name">Loading...</h2>
        <div class="biz-type" id="sidebar-biz-type">Boat Rental</div>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-section-label">Main</div>
        <div class="nav-item active" data-page="overview">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
          <span>Overview</span>
        </div>
        <div class="nav-item" data-page="profile">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
          <span>Business Profile</span>
        </div>
        <div class="nav-item" data-page="media">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
          <span>Media Library</span>
        </div>
        <div class="nav-item" data-page="pages">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
          <span>Pages</span>
        </div>
        <div class="nav-item" data-page="staff">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
          <span>Staff / Team</span>
        </div>

        <!-- Rentals -->
        <div class="nav-section-label">Rentals</div>
        <div class="nav-item" data-page="inventory">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16"/></svg>
          <span>Fleet</span>
        </div>
        <div class="nav-item" data-page="availability">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
          <span>Availability</span>
        </div>
        <div class="nav-item" data-page="addons">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/></svg>
          <span>Add-ons & Docks</span>
        </div>
        <div class="nav-item" data-page="locations">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>
          <span>Locations</span>
        </div>
        <div class="nav-item" data-page="bookings">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/><line x1="9" y1="12" x2="15" y2="12"/><line x1="9" y1="16" x2="13" y2="16"/></svg>
          <span>Bookings</span>
        </div>

        <div class="nav-item" data-page="waivers">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
          <span>Waivers</span>
        </div>
        <div class="nav-item" data-page="waitlist">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><line x1="19" y1="8" x2="19" y2="14"/><line x1="22" y1="11" x2="16" y2="11"/></svg>
          <span>Waitlist</span>
        </div>

        <!-- Customers & Marketing -->
        <div class="nav-section-label">Customers</div>
        <div class="nav-item" data-page="customers">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
          <span>Customer Database</span>
        </div>
        <div class="nav-item" data-page="coupons">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
          <span>Coupons & Promos</span>
        </div>

        <!-- Messaging & AI -->
        <div class="nav-section-label">Messaging & AI</div>
        <div class="nav-item" data-page="messaging">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg>
          <span>SMS & Notifications</span>
        </div>

        <!-- Reviews & Feedback -->
        <div class="nav-section-label">Reviews</div>
        <div class="nav-item" data-page="reviews">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
          <span>Reviews & Feedback</span>
        </div>

        <!-- Marketing & Growth -->
        <div class="nav-section-label">Marketing</div>
        <div class="nav-item" data-page="analytics">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 21H4.6c-.56 0-.6-.44-.6-1V3"/><path d="M9 18v-6"/><path d="M13 18V9"/><path d="M17 18v-3"/></svg>
          <span>Analytics</span>
        </div>
        <div class="nav-item" data-page="seo">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
          <span>SEO Manager</span>
        </div>
        <div class="nav-item" data-page="social">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg>
          <span>Social Media</span>
        </div>

        <!-- Settings & Billing -->
        <div class="nav-section-label">Settings</div>
        <div class="nav-item" data-page="billing">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="4" width="22" height="16" rx="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>
          <span>Billing & Plan</span>
        </div>
        <div class="nav-item" data-page="theme">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
          <span>Theme & Design</span>
        </div>
        <div class="nav-item" data-page="connections">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg>
          <span>Connections</span>
        </div>
        <div class="nav-item" data-page="site-editor">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
          <span>Site Editor</span>
        </div>
        <div class="nav-item" data-page="domain">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/></svg>
          <span>Domain</span>
        </div>
        <div class="nav-item" data-page="publish">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 16 12 14 15 10 15 8 12 2 12"/><path d="M5.45 5.11L2 12v6a2 2 0 002 2h16a2 2 0 002-2v-6l-3.45-6.89A2 2 0 0016.76 4H7.24a2 2 0 00-1.79 1.11z"/></svg>
          <span>Publish</span>
        </div>
      </nav>
    </aside>

    <!-- MAIN -->
    <div class="main">
      <header class="topbar">
        <div class="topbar-left">
          <button class="hamburger" onclick="toggleSidebar()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
          </button>
          <div class="topbar-title" id="topbar-title">Overview</div>
        </div>
        <div class="topbar-right">
          <button class="btn-view-site" onclick="viewLiveSite()">View Site</button>
          <button class="btn-logout" onclick="logout()">Log Out</button>
        </div>
      </header>

      <div class="content">

        <!-- OVERVIEW -->
        <div class="page-section active" id="page-overview">
          <div class="stats-row">
            <div class="stat-card"><div class="stat-label">Site Status</div><div class="stat-value" id="stat-status">Draft</div></div>
            <div class="stat-card"><div class="stat-label">Media Files</div><div class="stat-value" id="stat-media">0</div></div>
            <div class="stat-card"><div class="stat-label">Fleet Items</div><div class="stat-value" id="stat-items">0</div></div>
            <div class="stat-card"><div class="stat-label">Pages</div><div class="stat-value" id="stat-pages">0</div></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Quick Actions</h3></div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;">
              <button class="btn btn-primary" onclick="navigateTo('profile')">Edit Profile</button>
              <button class="btn btn-outline" onclick="navigateTo('inventory')">Manage Fleet</button>
              <button class="btn btn-outline" onclick="navigateTo('addons')">Add-ons & Docks</button>
              <button class="btn btn-outline" onclick="navigateTo('media')">Upload Media</button>
              <button class="btn btn-outline" onclick="navigateTo('bookings')">View Bookings</button>
              <button class="btn btn-outline" onclick="navigateTo('connections')">Connect Payments</button>
              <button class="btn btn-outline" onclick="navigateTo('messaging')">SMS & Messaging</button>
              <button class="btn btn-outline" onclick="navigateTo('reviews')">Reviews</button>
              <button class="btn btn-outline" onclick="navigateTo('customers')">Customers</button>
              <button class="btn btn-outline" onclick="navigateTo('coupons')">Promos</button>
              <button class="btn btn-outline" onclick="navigateTo('waivers')">Waivers</button>
              <button class="btn btn-success" onclick="navigateTo('publish')">Publish Site</button>
            </div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Rental Time Slots</h3></div>
            <div class="table-wrap">
              <table>
                <thead><tr><th>Slot</th><th>Time</th><th>Single Seater</th><th>Double Seater</th></tr></thead>
                <tbody>
                  <tr><td>Half Day AM</td><td>9:00 AM - 1:00 PM</td><td>$150</td><td>$200</td></tr>
                  <tr><td>Half Day PM</td><td>2:00 PM - 6:00 PM</td><td>$150</td><td>$200</td></tr>
                  <tr><td>All Day</td><td>9:00 AM - 6:00 PM</td><td>$225</td><td>$275</td></tr>
                  <tr><td style="color:var(--warning);">Group Rate (5+ singles)</td><td>9:00 AM - 6:00 PM</td><td>$200/boat</td><td>N/A</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- BUSINESS PROFILE -->
        <div class="page-section" id="page-profile">
          <div class="card">
            <div class="card-header"><h3>Business Information</h3></div>
            <div class="form-row">
              <div class="form-group"><label>Business Name</label><input type="text" id="prof-name"></div>
              <div class="form-group"><label>Phone</label><input type="tel" id="prof-phone"></div>
            </div>
            <div class="form-row">
              <div class="form-group"><label>Email</label><input type="email" id="prof-email"></div>
              <div class="form-group"><label>Website</label><input type="url" id="prof-website" placeholder="https://"></div>
            </div>
            <div class="form-group"><label>Description</label><textarea id="prof-description" rows="3"></textarea></div>
            <div class="form-group">
              <label>Logo</label>
              <div style="display:flex;align-items:center;gap:16px;">
                <img id="prof-logo-preview" src="" style="width:64px;height:64px;border-radius:8px;background:var(--card-border);object-fit:cover;display:none;">
                <button class="btn btn-outline btn-sm" onclick="document.getElementById('prof-logo-input').click()">Upload Logo</button>
                <input type="file" id="prof-logo-input" accept="image/*" style="display:none" onchange="uploadLogo(this)">
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Address</h3></div>
            <div class="form-group"><label>Street Address</label><input type="text" id="prof-address"></div>
            <div class="form-row">
              <div class="form-group"><label>City</label><input type="text" id="prof-city"></div>
              <div class="form-group"><label>State</label><input type="text" id="prof-state"></div>
            </div>
            <div class="form-group" style="max-width:200px;"><label>ZIP</label><input type="text" id="prof-zip"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Business Hours</h3></div>
            <div id="hours-editor"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Social Links</h3></div>
            <div class="form-row">
              <div class="form-group"><label>Facebook</label><input type="url" id="prof-social-facebook" placeholder="https://facebook.com/..."></div>
              <div class="form-group"><label>Instagram</label><input type="url" id="prof-social-instagram" placeholder="https://instagram.com/..."></div>
            </div>
            <div class="form-row">
              <div class="form-group"><label>TikTok</label><input type="url" id="prof-social-tiktok" placeholder="https://tiktok.com/@..."></div>
              <div class="form-group"><label>Yelp</label><input type="url" id="prof-social-yelp" placeholder="https://yelp.com/biz/..."></div>
            </div>
            <div class="form-row">
              <div class="form-group"><label>Google Business</label><input type="url" id="prof-social-google" placeholder="https://g.page/..."></div>
              <div class="form-group"><label>Twitter / X</label><input type="url" id="prof-social-twitter" placeholder="https://x.com/..."></div>
            </div>
          </div>
          <button class="btn btn-primary" onclick="saveProfile()">Save Profile</button>
        </div>

        <!-- MEDIA LIBRARY -->
        <div class="page-section" id="page-media">
          <div class="card">
            <div class="card-header">
              <h3>Media Library</h3>
              <button class="btn btn-primary btn-sm" onclick="document.getElementById('media-upload-input').click()">Upload Files</button>
            </div>
            <input type="file" id="media-upload-input" multiple accept="image/*,video/*,.pdf" style="display:none" onchange="uploadMedia(this.files)">
            <div class="upload-zone" id="media-drop-zone">
              <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
              <p>Drag & drop files here or click to upload</p>
            </div>
            <div class="grid-4" id="media-grid" style="margin-top:20px;"></div>
          </div>
        </div>

        <!-- PAGES -->
        <div class="page-section" id="page-pages">
          <div class="card">
            <div class="card-header"><h3>Pages</h3><button class="btn btn-primary btn-sm" onclick="openPageModal()">Add Page</button></div>
            <div id="pages-list"></div>
            <div class="empty-state" id="pages-empty"><h3>No pages yet</h3><p>Add pages like About, FAQ, Safety to your site.</p><button class="btn btn-primary" onclick="openPageModal()">Add First Page</button></div>
          </div>
        </div>

        <!-- STAFF -->
        <div class="page-section" id="page-staff">
          <div class="card">
            <div class="card-header"><h3>Team Members</h3><button class="btn btn-primary btn-sm" onclick="openStaffModal()">Add Member</button></div>
            <div class="grid-3" id="staff-grid"></div>
            <div class="empty-state" id="staff-empty"><h3>No team members</h3><p>Add your staff with photos and bios.</p><button class="btn btn-primary" onclick="openStaffModal()">Add First Member</button></div>
          </div>
        </div>

        <!-- INVENTORY (Fleet) -->
        <div class="page-section" id="page-inventory">
          <div class="card">
            <div class="card-header"><h3>Circle Boat Fleet</h3><button class="btn btn-primary btn-sm" onclick="openInventoryModal()">Add Boat</button></div>
            <div class="grid-3" id="inventory-grid"></div>
            <div class="empty-state" id="inventory-empty"><h3>No fleet items</h3><p>Add your circle boats with pricing and photos.</p><button class="btn btn-primary" onclick="openInventoryModal()">Add First Boat</button></div>
          </div>
        </div>

        <!-- AVAILABILITY -->
        <div class="page-section" id="page-availability">
          <div class="card">
            <div class="card-header">
              <h3>Availability Calendar</h3>
              <div style="display:flex;gap:8px;align-items:center;">
                <select id="avail-item-select" style="padding:8px 12px;background:var(--bg);border:1px solid var(--card-border);border-radius:var(--radius);color:var(--text);font-size:13px;" onchange="loadAvailability()"><option value="">Select boat...</option></select>
                <button class="btn btn-outline btn-sm" onclick="prevMonth()">&lt;</button>
                <span id="avail-month-label" style="min-width:140px;text-align:center;font-weight:600;"></span>
                <button class="btn btn-outline btn-sm" onclick="nextMonth()">&gt;</button>
              </div>
            </div>
            <div class="calendar-grid" id="availability-calendar"></div>
            <div style="display:flex;gap:16px;margin-top:16px;">
              <span class="badge badge-success">Available</span>
              <span class="badge badge-danger">Booked</span>
              <span class="badge badge-info">Blocked</span>
            </div>
          </div>
        </div>

        <!-- ADD-ONS & DOCKS -->
        <div class="page-section" id="page-addons">
          <div class="card">
            <div class="card-header"><h3>Docks & Add-ons</h3><button class="btn btn-primary btn-sm" onclick="openAddonModal()">Add Item</button></div>
            <div id="addons-list"></div>
            <div class="empty-state" id="addons-empty"><h3>No add-ons</h3><p>Add towable docks, cooler packs, speakers, and more.</p><button class="btn btn-primary" onclick="openAddonModal()">Add First Item</button></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Rental Policies</h3></div>
            <div class="form-row">
              <div class="form-group"><label>Deposit (%)</label><input type="number" id="policy-deposit" min="0" max="100"></div>
              <div class="form-group"><label>Cancellation Window (hours)</label><input type="number" id="policy-cancel-hours" min="0"></div>
            </div>
            <div class="form-row">
              <div class="form-group"><label>Cancellation Fee ($)</label><input type="number" id="policy-cancel-fee" min="0" step="0.01"></div>
              <div class="form-group"><label>Late Fee ($/hour)</label><input type="number" id="policy-late-fee" min="0" step="0.01"></div>
            </div>
            <div class="form-group"><label>Rental Agreement Text</label><textarea id="policy-agreement" rows="6" placeholder="Enter your rental agreement terms..."></textarea></div>
            <button class="btn btn-primary" onclick="savePolicies()">Save Policies</button>
          </div>
        </div>

        <!-- LOCATIONS -->
        <div class="page-section" id="page-locations">
          <div class="card">
            <div class="card-header"><h3>Pickup / Launch Locations</h3><button class="btn btn-primary btn-sm" onclick="openLocationModal()">Add Location</button></div>
            <div id="locations-list"></div>
            <div class="empty-state" id="locations-empty"><h3>No locations</h3><p>Add launch points for your circle boats.</p><button class="btn btn-primary" onclick="openLocationModal()">Add First Location</button></div>
          </div>
        </div>

        <!-- THEME & DESIGN -->
        <div class="page-section" id="page-theme">
          <div class="card">
            <div class="card-header"><h3>Colors</h3></div>
            <div class="color-row"><label>Primary</label><input type="color" id="theme-primary" value="#00ada8"><input type="text" id="theme-primary-hex" value="#00ada8" style="width:100px;padding:8px;background:var(--bg);border:1px solid var(--card-border);border-radius:var(--radius);color:var(--text);font-size:13px;"></div>
            <div class="color-row"><label>Secondary</label><input type="color" id="theme-secondary" value="#009590"><input type="text" id="theme-secondary-hex" value="#009590" style="width:100px;padding:8px;background:var(--bg);border:1px solid var(--card-border);border-radius:var(--radius);color:var(--text);font-size:13px;"></div>
            <div class="color-row"><label>Background</label><input type="color" id="theme-bg" value="#ffffff"><input type="text" id="theme-bg-hex" value="#ffffff" style="width:100px;padding:8px;background:var(--bg);border:1px solid var(--card-border);border-radius:var(--radius);color:var(--text);font-size:13px;"></div>
            <div class="color-row"><label>Text</label><input type="color" id="theme-text" value="#1a1a1a"><input type="text" id="theme-text-hex" value="#1a1a1a" style="width:100px;padding:8px;background:var(--bg);border:1px solid var(--card-border);border-radius:var(--radius);color:var(--text);font-size:13px;"></div>
            <div class="color-row"><label>Accent</label><input type="color" id="theme-accent" value="#f59e0b"><input type="text" id="theme-accent-hex" value="#f59e0b" style="width:100px;padding:8px;background:var(--bg);border:1px solid var(--card-border);border-radius:var(--radius);color:var(--text);font-size:13px;"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Typography</h3></div>
            <div class="form-row">
              <div class="form-group"><label>Heading Font</label><select id="theme-heading-font"><option>Titillium Web</option><option>Inter</option><option>Playfair Display</option><option>Montserrat</option><option>Poppins</option><option>Raleway</option><option>Roboto</option><option>Lora</option><option>Oswald</option></select></div>
              <div class="form-group"><label>Body Font</label><select id="theme-body-font"><option>Inter</option><option>Open Sans</option><option>Roboto</option><option>Lato</option><option>Source Sans Pro</option><option>Nunito</option></select></div>
            </div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Layout</h3></div>
            <div class="form-group"><label>Style</label><select id="theme-layout"><option value="modern">Modern</option><option value="classic">Classic</option><option value="minimal">Minimal</option><option value="bold">Bold</option></select></div>
          </div>
          <button class="btn btn-primary" onclick="saveTheme()">Save Theme</button>
        </div>

        <!-- CONNECTIONS -->
        <div class="page-section" id="page-connections">
          <div class="card">
            <div class="card-header"><h3>Stripe Connect â€” Get Paid</h3></div>
            <div id="stripe-settings"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Other Payment Providers</h3></div>
            <div class="oauth-grid" id="payment-connections"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Google Services</h3></div>
            <div class="oauth-grid" id="google-connections"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Social Media Accounts</h3></div>
            <p style="font-size:13px;color:var(--text-muted);margin-bottom:16px;">Connect your social accounts to auto-post updates, share photos, and engage with customers.</p>
            <div class="oauth-grid" id="social-connections"></div>
          </div>
        </div>

        <!-- BOOKINGS -->
        <div class="page-section" id="page-bookings">
          <div class="card" style="padding:0;overflow:visible;">
            <div id="bookings-stats" style="padding:20px 24px 0;"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Bookings</h3></div>
            <div id="bookings-filters" style="margin-bottom:16px;"></div>
            <div id="bookings-table"></div>
          </div>
        </div>

        <!-- MESSAGING & NOTIFICATIONS -->
        <div class="page-section" id="page-messaging">
          <!-- Phone Numbers -->
          <div class="card">
            <div class="card-header"><h3>Assigned Phone Numbers</h3></div>
            <div id="phone-numbers-section"></div>
          </div>

          <!-- Notification Toggles -->
          <div class="card">
            <div class="card-header"><h3>Notification Settings</h3></div>
            <div id="notification-toggles"></div>
          </div>

          <!-- Customer Booking Message Template -->
          <div class="card">
            <div class="card-header">
              <h3>Customer Booking Confirmation</h3>
              <button class="btn btn-outline btn-sm" onclick="insertTemplateToken('customer-template-editor')">Insert Token</button>
            </div>
            <p style="font-size:13px;color:var(--text-muted);margin-bottom:12px;">Customize the text message customers receive when they complete a booking. Use <code style="background:var(--bg);padding:2px 6px;border-radius:4px;font-size:12px;">{{tokens}}</code> for dynamic data.</p>
            <div id="token-popup" style="display:none;margin-bottom:12px;padding:12px;background:var(--bg);border:1px solid var(--card-border);border-radius:var(--radius);"></div>
            <textarea id="customer-template-editor" rows="10" style="width:100%;padding:10px 14px;background:var(--bg);border:1px solid var(--card-border);border-radius:var(--radius);color:var(--text);font-size:13px;font-family:'SF Mono','Fira Code',monospace;resize:vertical;line-height:1.6;"></textarea>
            <div style="display:flex;align-items:center;justify-content:space-between;margin-top:12px;">
              <button class="btn btn-primary btn-sm" onclick="updateCustomerTemplate()">Save Template</button>
              <span style="font-size:11px;color:var(--text-dim);">Available tokens: {{customer_name}}, {{date}}, {{time_slot}}, {{boat_count}}, {{boat_type}}, {{addons}}, {{total}}, {{location}}</span>
            </div>
          </div>

          <!-- SMS Preview -->
          <div class="card">
            <div class="card-header"><h3>SMS Preview</h3></div>
            <div id="template-preview"></div>
          </div>

          <!-- Owner Notification Template -->
          <div class="card">
            <div class="card-header">
              <h3>Owner Booking Notification</h3>
              <button class="btn btn-outline btn-sm" onclick="insertTemplateToken('owner-template-editor')">Insert Token</button>
            </div>
            <p style="font-size:13px;color:var(--text-muted);margin-bottom:12px;">This is the text YOU receive when someone books. Includes all the details you need.</p>
            <textarea id="owner-template-editor" rows="10" style="width:100%;padding:10px 14px;background:var(--bg);border:1px solid var(--card-border);border-radius:var(--radius);color:var(--text);font-size:13px;font-family:'SF Mono','Fira Code',monospace;resize:vertical;line-height:1.6;"></textarea>
            <div style="margin-top:12px;">
              <button class="btn btn-primary btn-sm" onclick="updateOwnerTemplate()">Save Template</button>
            </div>
          </div>

          <!-- Photo to Gallery -->
          <div class="card">
            <div class="card-header"><h3>Photo Upload via Text</h3></div>
            <div id="photo-gallery-sms"></div>
          </div>

          <!-- Voice AI / Dashboard Control -->
          <div class="card">
            <div class="card-header"><h3>Voice & Text Dashboard Control</h3></div>
            <div id="voice-ai-section"></div>
          </div>
        </div>

        <!-- REVIEWS & FEEDBACK -->
        <div class="page-section" id="page-reviews">
          <!-- Stats -->
          <div class="card" style="padding:0;overflow:visible;">
            <div id="review-stats" style="padding:20px 24px 0;"></div>
          </div>

          <!-- Review Settings -->
          <div class="card">
            <div class="card-header"><h3>Review Settings</h3></div>
            <div id="review-settings"></div>
          </div>

          <!-- Custom Questions -->
          <div class="card">
            <div class="card-header">
              <h3>Custom Review Questions</h3>
            </div>
            <div id="review-questions-editor"></div>
          </div>

          <!-- Reviews List -->
          <div class="card">
            <div class="card-header"><h3>Customer Reviews</h3></div>
            <div id="review-filters" style="margin-bottom:16px;"></div>
            <div id="reviews-list"></div>
          </div>
        </div>

        <!-- CUSTOMERS (CRM) -->
        <div class="page-section" id="page-customers">
          <div class="card" style="padding:0;overflow:visible;">
            <div id="customer-stats" style="padding:20px 24px 0;"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Customer Database</h3></div>
            <div id="customer-filters" style="margin-bottom:16px;"></div>
            <div id="customer-list"></div>
          </div>
        </div>

        <!-- COUPONS & PROMOS -->
        <div class="page-section" id="page-coupons">
          <div class="card" style="padding:0;overflow:visible;">
            <div id="coupon-stats" style="padding:20px 24px 0;"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Coupons & Promo Codes</h3></div>
            <div id="coupon-filters" style="margin-bottom:16px;"></div>
            <div id="coupon-list"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Website Promo Banner</h3></div>
            <div id="coupon-embed"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>SMS Marketing Campaigns</h3></div>
            <div id="sms-campaigns"></div>
          </div>
        </div>

        <!-- WAIVERS -->
        <div class="page-section" id="page-waivers">
          <div class="card" style="padding:0;overflow:visible;">
            <div id="waiver-stats" style="padding:20px 24px 0;"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Waiver Settings</h3></div>
            <div id="waiver-settings"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Waiver Templates</h3></div>
            <div id="waiver-templates"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Signed Waivers</h3></div>
            <div id="signed-waivers"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>3rd Party E-Signature Providers</h3></div>
            <div id="waiver-integrations"></div>
          </div>
        </div>

        <!-- WAITLIST -->
        <div class="page-section" id="page-waitlist">
          <div class="card" style="padding:0;overflow:visible;">
            <div id="waitlist-stats" style="padding:20px 24px 0;"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Waitlist Settings</h3></div>
            <div id="waitlist-settings"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Waitlist</h3></div>
            <div id="waitlist-entries"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Waitlist Notification SMS</h3></div>
            <div id="waitlist-sms-template"></div>
          </div>
        </div>

        <!-- BILLING -->
        <div class="page-section" id="page-billing">
          <div class="card">
            <div class="card-header"><h3>Current Plan</h3></div>
            <div id="billing-current-plan"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Usage This Month</h3></div>
            <div id="billing-usage"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Available Plans</h3></div>
            <div id="billing-plans"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Payment Method</h3></div>
            <div id="billing-payment"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Invoice History</h3></div>
            <div id="billing-invoices"></div>
          </div>
        </div>

        <!-- SITE EDITOR -->
        <div class="page-section" id="page-site-editor">
          <div class="card" style="margin-bottom:12px;">
            <div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px;">
              <div style="display:flex;gap:8px;">
                <button class="btn btn-outline btn-sm" onclick="addSection()">Add Section</button>
                <button class="btn btn-outline btn-sm" onclick="toggleCssEditor()">Edit CSS</button>
                <button class="btn btn-outline btn-sm" onclick="insertDataToken()">Insert Data</button>
              </div>
              <div style="display:flex;gap:8px;">
                <button class="btn btn-outline btn-sm" onclick="setPreviewMode('desktop')">Desktop</button>
                <button class="btn btn-outline btn-sm" onclick="setPreviewMode('mobile')">Mobile</button>
                <button class="btn btn-primary btn-sm" onclick="refreshPreview()">Refresh Preview</button>
              </div>
            </div>
          </div>
          <div class="editor-layout">
            <div class="editor-panel">
              <div class="section-list" id="editor-sections"></div>
              <textarea class="editor-textarea" id="editor-code" placeholder="Select a section to edit its HTML..." oninput="onEditorInput()"></textarea>
            </div>
            <div class="editor-panel">
              <iframe class="preview-frame" id="editor-preview"></iframe>
            </div>
          </div>
        </div>

        <!-- DOMAIN -->
        <div class="page-section" id="page-domain">
          <!-- Free subdomain -->
          <div class="card">
            <div class="card-header"><h3>Your CyberCheck Subdomain</h3></div>
            <div id="subdomain-section"></div>
          </div>
          <!-- Custom domain -->
          <div class="card">
            <div class="card-header"><h3>Custom Domain</h3></div>
            <div id="custom-domain-section"></div>
          </div>
          <!-- DNS Instructions -->
          <div class="card" id="dns-instructions-card" style="display:none;">
            <div class="card-header"><h3>DNS Setup Instructions</h3></div>
            <div id="dns-instructions"></div>
          </div>
          <!-- SSL Status -->
          <div class="card" id="ssl-status-card" style="display:none;">
            <div class="card-header"><h3>SSL Certificate</h3></div>
            <div id="ssl-status"></div>
          </div>
        </div>

        <!-- PUBLISH -->
        <div class="page-section" id="page-publish">
          <div class="card">
            <div class="card-header"><h3>Site Status</h3></div>
            <div style="display:flex;align-items:center;gap:16px;margin-bottom:20px;">
              <span id="publish-status-badge" class="badge badge-warning">Draft</span>
              <span id="publish-last-updated" style="font-size:13px;color:var(--text-muted);"></span>
            </div>
            <div style="display:flex;gap:10px;">
              <button class="btn btn-outline" onclick="previewSite()">Preview</button>
              <button class="btn btn-success" onclick="publishSite()">Publish</button>
              <button class="btn btn-danger btn-sm" onclick="unpublishSite()" id="btn-unpublish" style="display:none;">Unpublish</button>
            </div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Revision History</h3></div>
            <div id="revisions-list"></div>
            <div class="empty-state" id="revisions-empty"><h3>No revisions</h3><p>Revisions are saved each time you publish.</p></div>
          </div>
        </div>

        <!-- ANALYTICS -->
        <div class="page-section" id="page-analytics">
          <div class="stats-row">
            <div class="stat-card"><div class="stat-label">Visitors Today</div><div class="stat-value" id="analytics-today-visitors">0</div></div>
            <div class="stat-card"><div class="stat-label">Page Views</div><div class="stat-value" id="analytics-today-pageviews">0</div></div>
            <div class="stat-card"><div class="stat-label">Conversions</div><div class="stat-value" id="analytics-today-conversions">0</div></div>
            <div class="stat-card"><div class="stat-label">Revenue Today</div><div class="stat-value" id="analytics-today-revenue">$0.00</div></div>
          </div>
          <div class="card">
            <div class="card-header">
              <h3>Traffic Overview</h3>
              <div style="display:flex;gap:8px;">
                <button class="btn btn-outline btn-sm period-btn active" onclick="changeAnalyticsPeriod('today')">Today</button>
                <button class="btn btn-outline btn-sm period-btn" onclick="changeAnalyticsPeriod('week')">Week</button>
                <button class="btn btn-outline btn-sm period-btn" onclick="changeAnalyticsPeriod('month')">Month</button>
                <button class="btn btn-outline btn-sm" onclick="exportAnalytics()">Export</button>
              </div>
            </div>
            <div id="revenue-chart"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Top Pages</h3></div>
            <div id="top-pages-list"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Traffic Sources</h3></div>
            <div id="traffic-sources-list"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Conversion Funnel</h3></div>
            <div id="conversion-funnel"></div>
          </div>
        </div>

        <!-- SEO MANAGER -->
        <div class="page-section" id="page-seo">
          <div class="card">
            <div class="card-header">
              <h3>SEO Pages</h3>
              <button class="btn btn-primary btn-sm" onclick="openSEOPageModal()">+ Add Page</button>
            </div>
            <div id="seo-pages-list"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Sitemap Configuration</h3></div>
            <div class="form-group" style="display:flex;align-items:center;gap:12px;">
              <label style="margin:0;">Auto-generate sitemap</label>
              <label class="toggle"><input type="checkbox" id="sitemap-auto-generate" checked><span class="toggle-slider"></span></label>
            </div>
            <div class="form-group" style="display:flex;align-items:center;gap:12px;">
              <label style="margin:0;">Include all pages</label>
              <label class="toggle"><input type="checkbox" id="sitemap-include-pages" checked><span class="toggle-slider"></span></label>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Change Frequency</label>
                <select id="sitemap-frequency">
                  <option value="daily">Daily</option>
                  <option value="weekly" selected>Weekly</option>
                  <option value="monthly">Monthly</option>
                </select>
              </div>
              <div class="form-group">
                <label>Priority</label>
                <select id="sitemap-priority">
                  <option value="1.0">1.0 (Highest)</option>
                  <option value="0.8">0.8</option>
                  <option value="0.5" selected>0.5 (Medium)</option>
                  <option value="0.3">0.3</option>
                </select>
              </div>
            </div>
            <div style="display:flex;gap:10px;">
              <button class="btn btn-primary" onclick="saveSitemapConfig()">Save Config</button>
              <button class="btn btn-outline" onclick="generateSitemap()">Generate Sitemap</button>
            </div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Robots.txt</h3></div>
            <div class="form-group">
              <textarea id="robots-txt" rows="8" placeholder="User-agent: *&#10;Allow: /"></textarea>
            </div>
            <button class="btn btn-primary" onclick="saveRobotsTxt()">Save robots.txt</button>
          </div>
          <div class="card">
            <div class="card-header"><h3>Schema.org Structured Data</h3></div>
            <p style="font-size:13px;color:var(--text-muted);margin-bottom:16px;">Add LocalBusiness schema to help search engines understand your business.</p>
            <button class="btn btn-outline" onclick="previewSchema()">Preview Schema JSON-LD</button>
          </div>
        </div>

        <!-- SOCIAL MEDIA -->
        <div class="page-section" id="page-social">
          <div class="card">
            <div class="card-header"><h3>Connected Accounts</h3></div>
            <div id="social-accounts-grid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:16px;"></div>
          </div>
          <div class="card">
            <div class="card-header">
              <h3>Posts</h3>
              <button class="btn btn-primary btn-sm" onclick="openPostComposer()">+ New Post</button>
            </div>
            <div id="social-posts-list"></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>Social Media Analytics</h3></div>
            <div id="social-analytics-grid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;"></div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- MODALS -->

  <!-- Page Modal -->
  <div class="modal-overlay" id="modal-page"><div class="modal">
    <div class="modal-header"><h3 id="page-modal-title">Add Page</h3><button class="modal-close" onclick="closeModal('modal-page')">&times;</button></div>
    <div class="form-group"><label>Page Title</label><input type="text" id="page-form-title" placeholder="About Us"></div>
    <div class="form-group"><label>URL Slug</label><input type="text" id="page-form-slug" placeholder="about-us"></div>
    <div class="form-group"><label>Content</label><textarea id="page-form-content" rows="8" placeholder="Page content..."></textarea></div>
    <div class="form-row"><div class="form-group"><label>SEO Title</label><input type="text" id="page-form-seo-title"></div><div class="form-group"><label>SEO Description</label><input type="text" id="page-form-seo-desc"></div></div>
    <div class="modal-footer"><button class="btn btn-outline" onclick="closeModal('modal-page')">Cancel</button><button class="btn btn-primary" onclick="savePage()">Save Page</button></div>
    <input type="hidden" id="page-form-id">
  </div></div>

  <!-- Staff Modal -->
  <div class="modal-overlay" id="modal-staff"><div class="modal">
    <div class="modal-header"><h3 id="staff-modal-title">Add Team Member</h3><button class="modal-close" onclick="closeModal('modal-staff')">&times;</button></div>
    <div class="form-group"><label>Name</label><input type="text" id="staff-form-name"></div>
    <div class="form-group"><label>Role / Title</label><input type="text" id="staff-form-role" placeholder="Dock Manager"></div>
    <div class="form-group"><label>Bio</label><textarea id="staff-form-bio" rows="3"></textarea></div>
    <div class="form-group"><label>Photo</label><input type="file" id="staff-form-photo" accept="image/*"></div>
    <div class="modal-footer"><button class="btn btn-outline" onclick="closeModal('modal-staff')">Cancel</button><button class="btn btn-primary" onclick="saveStaff()">Save</button></div>
    <input type="hidden" id="staff-form-id">
  </div></div>

  <!-- Inventory Modal (Circle Boats) -->
  <div class="modal-overlay" id="modal-inventory"><div class="modal">
    <div class="modal-header"><h3 id="inv-modal-title">Add Fleet Item</h3><button class="modal-close" onclick="closeModal('modal-inventory')">&times;</button></div>
    <div class="form-group"><label>Boat Name</label><input type="text" id="inv-form-name" placeholder="Single Seater Circle Boat"></div>
    <div class="form-group"><label>Description</label><textarea id="inv-form-desc" rows="2" placeholder="Solo cruiser, fits one adult..."></textarea></div>
    <div class="form-row">
      <div class="form-group"><label>Half Day AM ($)</label><input type="number" id="inv-form-half-am" min="0" step="0.01" placeholder="150"></div>
      <div class="form-group"><label>Half Day PM ($)</label><input type="number" id="inv-form-half-pm" min="0" step="0.01" placeholder="150"></div>
    </div>
    <div class="form-row">
      <div class="form-group"><label>All Day ($)</label><input type="number" id="inv-form-allday" min="0" step="0.01" placeholder="225"></div>
      <div class="form-group"><label>Deposit ($)</label><input type="number" id="inv-form-deposit" min="0" step="0.01" placeholder="0"></div>
    </div>
    <div class="form-group"><label>Quantity Available</label><input type="number" id="inv-form-qty" min="1" value="1"></div>
    <div class="form-group"><label>Specs</label><input type="text" id="inv-form-specs" placeholder='70" diameter | 57 lbs | 35lb motor'></div>
    <div class="form-group"><label>Photos</label><input type="file" id="inv-form-photos" accept="image/*" multiple></div>
    <div class="modal-footer"><button class="btn btn-outline" onclick="closeModal('modal-inventory')">Cancel</button><button class="btn btn-primary" onclick="saveInventoryItem()">Save</button></div>
    <input type="hidden" id="inv-form-id">
  </div></div>

  <!-- Addon Modal -->
  <div class="modal-overlay" id="modal-addon"><div class="modal">
    <div class="modal-header"><h3>Add Add-on / Dock</h3><button class="modal-close" onclick="closeModal('modal-addon')">&times;</button></div>
    <div class="form-group"><label>Name</label><input type="text" id="addon-form-name" placeholder="Mini Dock"></div>
    <div class="form-group"><label>Description</label><textarea id="addon-form-desc" rows="2"></textarea></div>
    <div class="form-group"><label>Price ($)</label><input type="number" id="addon-form-price" min="0" step="0.01"></div>
    <div class="modal-footer"><button class="btn btn-outline" onclick="closeModal('modal-addon')">Cancel</button><button class="btn btn-primary" onclick="saveAddon()">Save</button></div>
    <input type="hidden" id="addon-form-id">
  </div></div>

  <!-- Location Modal -->
  <div class="modal-overlay" id="modal-location"><div class="modal">
    <div class="modal-header"><h3>Add Location</h3><button class="modal-close" onclick="closeModal('modal-location')">&times;</button></div>
    <div class="form-group"><label>Location Name</label><input type="text" id="loc-form-name" placeholder="Main Launch Point"></div>
    <div class="form-group"><label>Address</label><input type="text" id="loc-form-address"></div>
    <div class="modal-footer"><button class="btn btn-outline" onclick="closeModal('modal-location')">Cancel</button><button class="btn btn-primary" onclick="saveLocation()">Save</button></div>
    <input type="hidden" id="loc-form-id">
  </div></div>

  <!-- Media Detail Modal -->
  <div class="modal-overlay" id="modal-media-detail"><div class="modal">
    <div class="modal-header"><h3>Media Details</h3><button class="modal-close" onclick="closeModal('modal-media-detail')">&times;</button></div>
    <img id="media-detail-img" src="" style="width:100%;border-radius:8px;margin-bottom:16px;">
    <div class="form-group"><label>File URL (click to copy)</label><input type="text" id="media-detail-url" readonly onclick="this.select();navigator.clipboard.writeText(this.value);toast('URL copied!')"></div>
    <p style="font-size:12px;color:var(--text-muted);" id="media-detail-info"></p>
    <div class="modal-footer"><button class="btn btn-danger btn-sm" onclick="deleteMedia()">Delete</button><button class="btn btn-outline" onclick="closeModal('modal-media-detail')">Close</button></div>
    <input type="hidden" id="media-detail-id">
  </div></div>

  <!-- Booking Detail Modal -->
  <div class="modal-overlay" id="modal-booking"><div class="modal" style="max-width:640px;">
    <div class="modal-header"><h3 id="booking-modal-title">Booking Details</h3><button class="modal-close" onclick="closeModal('modal-booking')">&times;</button></div>
    <div id="booking-detail-body"></div>
  </div></div>

  <!-- Customer Detail Modal -->
  <div class="modal-overlay" id="modal-customer"><div class="modal" style="max-width:700px;">
    <div class="modal-header"><h3 id="customer-modal-title">Customer Details</h3><button class="modal-close" onclick="closeModal('modal-customer')">&times;</button></div>
    <div id="customer-detail-body"></div>
  </div></div>

  <!-- Coupon Modal -->
  <div class="modal-overlay" id="modal-coupon"><div class="modal" style="max-width:560px;">
    <div class="modal-header"><h3 id="coupon-modal-title">Create Coupon</h3><button class="modal-close" onclick="closeModal('modal-coupon')">&times;</button></div>
    <div id="coupon-modal-body"></div>
  </div></div>

  <!-- Waiver Modal -->
  <div class="modal-overlay" id="modal-waiver"><div class="modal" style="max-width:640px;">
    <div class="modal-header"><h3 id="waiver-modal-title">Waiver</h3><button class="modal-close" onclick="closeModal('modal-waiver')">&times;</button></div>
    <div id="waiver-modal-body"></div>
  </div></div>

  <!-- Insert Data Token Modal -->
  <div class="modal-overlay" id="modal-insert-data"><div class="modal">
    <div class="modal-header"><h3>Insert Data Token</h3><button class="modal-close" onclick="closeModal('modal-insert-data')">&times;</button></div>
    <p style="font-size:13px;color:var(--text-muted);margin-bottom:16px;">Click a token to insert it into your HTML. Tokens are replaced with real data when published.</p>
    <div id="data-tokens-list"></div>
  </div></div>

  <!-- SEO Page Modal -->
  <div class="modal-overlay" id="modal-seo-page"><div class="modal" style="max-width:700px;">
    <div class="modal-header"><h3>SEO Settings</h3><button class="modal-close" onclick="closeModal('modal-seo-page')">&times;</button></div>
    <div class="form-group"><label>Page Slug</label><input type="text" id="seo-page-slug" placeholder="/about"></div>
    <div class="form-group"><label>Page Title (60 chars max)</label><input type="text" id="seo-page-title" maxlength="60" placeholder="About Us | Business Name"></div>
    <div class="form-group"><label>Meta Description (160 chars max)</label><textarea id="seo-meta-description" rows="3" maxlength="160" placeholder="Describe your page for search engines..."></textarea></div>
    <div class="form-group"><label>Meta Keywords (optional)</label><input type="text" id="seo-meta-keywords" placeholder="boat rental, orange beach, circle boats"></div>
    <div style="border-top:1px solid var(--card-border);margin:20px 0;padding-top:20px;">
      <h4 style="margin-bottom:12px;">Open Graph (Facebook)</h4>
      <div class="form-group"><label>OG Title</label><input type="text" id="seo-og-title" placeholder="Leave blank to use Page Title"></div>
      <div class="form-group"><label>OG Description</label><textarea id="seo-og-description" rows="2" placeholder="Leave blank to use Meta Description"></textarea></div>
      <div class="form-group"><label>OG Image URL</label><input type="text" id="seo-og-image" placeholder="https://yoursite.com/og-image.jpg"></div>
    </div>
    <div style="border-top:1px solid var(--card-border);margin:20px 0;padding-top:20px;">
      <h4 style="margin-bottom:12px;">Twitter Card</h4>
      <div class="form-group">
        <label>Card Type</label>
        <select id="seo-twitter-card">
          <option value="summary">Summary</option>
          <option value="summary_large_image" selected>Summary Large Image</option>
        </select>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group"><label>Canonical URL</label><input type="text" id="seo-canonical-url" placeholder="https://yoursite.com/about"></div>
      <div class="form-group">
        <label>Robots</label>
        <select id="seo-robots">
          <option value="index, follow" selected>Index, Follow</option>
          <option value="noindex, follow">No Index, Follow</option>
          <option value="index, nofollow">Index, No Follow</option>
          <option value="noindex, nofollow">No Index, No Follow</option>
        </select>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeModal('modal-seo-page')">Cancel</button>
      <button class="btn btn-primary" onclick="saveSEOPage()">Save SEO Settings</button>
    </div>
    <input type="hidden" id="seo-page-id">
  </div></div>

  <!-- Schema Preview Modal -->
  <div class="modal-overlay" id="modal-schema-preview"><div class="modal">
    <div class="modal-header"><h3>Schema.org JSON-LD</h3><button class="modal-close" onclick="closeModal('modal-schema-preview')">&times;</button></div>
    <p style="font-size:13px;color:var(--text-muted);margin-bottom:12px;">Copy this JSON-LD and paste it in the &lt;head&gt; section of your website.</p>
    <div class="form-group"><textarea id="schema-preview" rows="12" readonly style="font-family:monospace;font-size:12px;"></textarea></div>
    <div class="modal-footer">
      <button class="btn btn-primary" onclick="copySchema()">Copy to Clipboard</button>
      <button class="btn btn-outline" onclick="closeModal('modal-schema-preview')">Close</button>
    </div>
  </div></div>

  <!-- Post Composer Modal -->
  <div class="modal-overlay" id="modal-post-composer"><div class="modal" style="max-width:640px;">
    <div class="modal-header"><h3>Create Social Media Post</h3><button class="modal-close" onclick="closeModal('modal-post-composer')">&times;</button></div>
    <div class="form-group">
      <label>Post Text</label>
      <textarea id="post-text" rows="5" placeholder="What's happening?" oninput="updateCharCount()"></textarea>
      <div style="font-size:12px;color:var(--text-muted);text-align:right;margin-top:4px;" id="char-count">0 / 280</div>
    </div>
    <div class="form-group">
      <label>Media URLs (one per line, optional)</label>
      <textarea id="post-media-urls" rows="3" placeholder="https://yoursite.com/image1.jpg&#10;https://yoursite.com/image2.jpg"></textarea>
    </div>
    <div class="form-group">
      <label>Post To:</label>
      <div style="display:flex;flex-wrap:wrap;gap:12px;margin-top:8px;">
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
          <input type="checkbox" class="platform-checkbox" id="platform-facebook" value="facebook">
          <span>Facebook</span>
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
          <input type="checkbox" class="platform-checkbox" id="platform-instagram" value="instagram">
          <span>Instagram</span>
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
          <input type="checkbox" class="platform-checkbox" id="platform-twitter" value="twitter">
          <span>Twitter</span>
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
          <input type="checkbox" class="platform-checkbox" id="platform-tiktok" value="tiktok">
          <span>TikTok</span>
        </label>
      </div>
    </div>
    <div class="form-group">
      <label>When to Post:</label>
      <select id="post-schedule-type" onchange="toggleScheduleDateTime()">
        <option value="now">Post Now</option>
        <option value="schedule">Schedule for Later</option>
      </select>
    </div>
    <div class="form-group" style="display:none;">
      <label>Schedule Date & Time</label>
      <input type="datetime-local" id="post-schedule-datetime">
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeModal('modal-post-composer')">Cancel</button>
      <button class="btn btn-primary" onclick="savePost()">Post</button>
    </div>
    <input type="hidden" id="post-id">
  </div></div>

  <!-- Post Stats Modal -->
  <div class="modal-overlay" id="modal-post-stats"><div class="modal">
    <div class="modal-header"><h3>Post Engagement</h3><button class="modal-close" onclick="closeModal('modal-post-stats')">&times;</button></div>
    <div id="post-stats-content"></div>
    <div class="modal-footer"><button class="btn btn-outline" onclick="closeModal('modal-post-stats')">Close</button></div>
  </div></div>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>

  <!-- Scripts (v4 = Supabase direct) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  <script src="js/supabase-client.js?v=4"></script>
  <script src="js/cc.js?v=4"></script>
  <script>
    // Auth guard â€” must be logged in to view dashboard
    if (!CC.getToken()) { window.location.href = 'login.html'; }
  </script>
  <script src="js/upload.js?v=4"></script>
  <script src="shared-data.js?v=4"></script>
  <script src="config.js?v=4"></script>
  <script src="js/auth.js?v=4"></script>
  <script src="js/router.js?v=4"></script>
  <script src="js/profile.js?v=4"></script>
  <script src="js/media.js?v=4"></script>
  <script src="js/inventory.js?v=4"></script>
  <script src="js/availability.js?v=4"></script>
  <script src="js/addons.js?v=4"></script>
  <script src="js/locations.js?v=4"></script>
  <script src="js/pages.js?v=4"></script>
  <script src="js/seo.js?v=4"></script>
  <script src="js/staff.js?v=4"></script>
  <script src="js/theme.js?v=4"></script>
  <script src="js/oauth.js?v=4"></script>
  <script src="js/social.js?v=4"></script>
  <script src="js/bookings.js?v=4"></script>
  <script src="js/reviews.js?v=4"></script>
  <script src="js/messaging.js?v=4"></script>
  <script src="js/customers.js?v=4"></script>
  <script src="js/coupons.js?v=4"></script>
  <script src="js/waivers.js?v=4"></script>
  <script src="js/waitlist.js?v=4"></script>
  <script src="js/billing.js?v=4"></script>
  <script src="js/calendar-view.js?v=4"></script>
  <script src="js/analytics.js?v=4"></script>
  <script src="js/domain.js?v=4"></script>
  <script src="js/site-editor.js?v=4"></script>
  <script src="js/publish.js?v=4"></script>
  <script>
    var _business = null;

    function viewLiveSite() {
      window.open('../beachside-site/index.html', '_blank');
    }

    function logout() {
      if (confirm('Log out?')) {
        if (supabase) supabase.auth.signOut().catch(function(){});
        if (typeof CC !== 'undefined' && CC.clearToken) CC.clearToken();
        if (typeof clearSupabaseCache === 'function') clearSupabaseCache();
        window.location.href = 'login.html';
      }
    }

    // localStorage persistence enabled â€” demo data seeded by demo-data.js
    // In production with API backend, data comes from server instead

    (async function() {
      // Load real session from API (falls back to hardcoded config if offline)
      await initConfig();

      _business = {
        id: USER_CONFIG.business_id,
        type: USER_CONFIG.business_type,
        name: USER_CONFIG.business_name,
        status: 'draft'
      };

      document.getElementById('sidebar-biz-name').textContent = _business.name;
      document.getElementById('sidebar-biz-type').textContent =
        _business.type.charAt(0).toUpperCase() + _business.type.slice(1);

      initRouter();

      // Load all modules
      loadProfile();
      loadMedia();
      loadPages();
      loadStaff();
      loadTheme();
      loadConnections();
      loadBookings();
      loadReviews();
      loadMessaging();
      loadCustomers();
      loadCoupons();
      loadWaivers();
      loadWaitlist();
      loadBilling();
      loadDomain();
      loadSiteEditor();
      loadPublishStatus();
      loadInventory();
      loadAvailabilityItems();
      loadAddons();
      loadLocations();
      loadAnalytics();
      loadSEO();
      loadSocial();

      // Update overview stats
      document.getElementById('stat-status').textContent = 'Draft';
      document.getElementById('stat-media').textContent = typeof _mediaItems !== 'undefined' ? _mediaItems.length : 0;
      document.getElementById('stat-pages').textContent = typeof _pages !== 'undefined' ? _pages.length : 0;
      document.getElementById('stat-items').textContent = typeof _inventoryItems !== 'undefined'
        ? _inventoryItems.reduce(function(s, i) { return s + i.qty; }, 0) : 0;
    })();

    function openModal(id) { document.getElementById(id).classList.add('open'); }
    function closeModal(id) { document.getElementById(id).classList.remove('open'); }

    document.querySelectorAll('.modal-overlay').forEach(function(o) {
      o.addEventListener('click', function(e) { if (e.target === o) o.classList.remove('open'); });
    });
  </script>
</body>
</html>
